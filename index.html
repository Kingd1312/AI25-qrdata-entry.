
<!DOCTYPE html>
<html>
<head>
  <title>Guest Registration</title>
  <style>
    body { font-family: Arial; margin: 20px; }
    input, button { margin: 10px 0; padding: 10px; width: 100%; }
  </style>
</head>
<body>
  <h2>Register Guest</h2>
  <form id="registerForm">
    <input type="text" id="name" placeholder="Full Name" required><br>
    <input type="file" id="photo" accept="image/*" required><br>
    <button type="submit">Register</button>
  </form>
  <p id="status"></p>
  <script>
    document.getElementById('registerForm').onsubmit = async function(e) {
      e.preventDefault();
      const name = document.getElementById('name').value;
      const photo = document.getElementById('photo').files[0];
      const reader = new FileReader();
      reader.onload = function() {
        const data = {
          name: name,
          photo: reader.result,
          id: Date.now().toString()
        };
        fetch('db.json').then(res => res.json()).then(guests => {
          guests.push(data);
          const blob = new Blob([JSON.stringify(guests, null, 2)], { type: 'application/json' });
          const a = document.createElement('a');
          a.href = URL.createObjectURL(blob);
          a.download = "db.json";
          a.click();
          document.getElementById('status').textContent = "Guest registered! Download updated db.json and replace it in GitHub.";
        });
      };
      reader.readAsDataURL(photo);
    };
  </script>
</body>
</html>
